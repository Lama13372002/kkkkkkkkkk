# Админ-панель RoyalTransfer

Этот документ содержит инструкции по установке и настройке административной панели для сайта RoyalTransfer.

## Настройка проекта

### Настройка базы данных MySQL на Railway

1. Войдите в свой аккаунт на [Railway](https://railway.app/)
2. Создайте новый проект
3. Выберите "Add a service" → "Database" → "MySQL"
4. После создания MySQL-базы данных, скопируйте строку подключения
5. В разделе Variables добавьте переменную окружения:
   - `DATABASE_URL`: строка подключения к вашей базе данных (из предыдущего шага)

### Запуск SQL миграций

1. Используйте MySQL Workbench для подключения к базе данных на Railway:
   - Host: значение хоста из строки подключения
   - Port: значение порта из строки подключения
   - Username: значение пользователя из строки подключения
   - Password: значение пароля из строки подключения

2. После подключения выполните следующие SQL-файлы:
   - `db.sql` - для основных таблиц сайта
   - `prisma/migration.sql` - для таблицы настроек футера

### Настройка Next.js приложения на Railway

1. В проекте Railway выберите "Add a service" → "GitHub Repo"
2. Подключите ваш репозиторий GitHub с кодом проекта
3. Добавьте переменные окружения:
   - `DATABASE_URL`: строка подключения к вашей MySQL базе данных
   - `NODE_ENV`: `production`

4. Railway автоматически запустит команду сборки из вашего `package.json`

## Доступ к админ-панели

1. После деплоя приложения, админ-панель будет доступна по адресу:
   - `https://<ваш-домен>/admin/login`

2. Для входа используйте API-ключ:
   - `12345-admin-secret-key`

3. **ВАЖНО**: В реальном проекте необходимо заменить API-ключ из файла `src/lib/constants.ts` на более надежный и хранить его в переменных окружения.

## Функциональность админ-панели

1. **Редактирование подвала сайта**:
   - Контактная информация (адрес, телефон, email, часы работы)
   - Ссылки на социальные сети (Instagram, Telegram, WhatsApp)
   - Описание компании

## Расширение функциональности

Для добавления новых функций в админ-панель:

1. Добавьте новые модели в Prisma схему (`prisma/schema.prisma`)
2. Создайте миграции для новых таблиц
3. Добавьте новые API-роуты в директорию `src/app/api/`
4. Создайте новые страницы админ-панели в директории `src/app/admin/`
5. Добавьте ссылки на новые страницы в меню админ-панели в файле `src/lib/constants.ts`

## Безопасность

В реальном проекте рекомендуется:

1. Использовать более надежную аутентификацию (OAuth, JWT)
2. Хранить секретные ключи в переменных окружения
3. Добавить авторизацию на уровне API
4. Настроить HTTPS
5. Добавить защиту от CSRF-атак

## Известные проблемы

1. В текущей версии авторизация выполнена на клиентской стороне с помощью простого API-ключа, что небезопасно для реального проекта
2. Отсутствует валидация данных на уровне API
3. Необходимо реализовать систему ролей для админ-панели при дальнейшем развитии

## Техническая поддержка

По вопросам технической поддержки обращайтесь к разработчикам.
